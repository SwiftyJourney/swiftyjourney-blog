---
import { Image } from 'astro:assets';
import type { CollectionEntry } from 'astro:content';
import BaseLayout from './BaseLayout.astro';

type Props = CollectionEntry<'blog'>['data'] & {
  lang?: "en" | "es";
};

const { title, description, pubDate, updatedDate, heroImage, lang = "es" } = Astro.props;
---

<BaseLayout title={title} description={description} lang={lang}>
	<article class="py-12">
		<!-- Hero Image -->
		{heroImage && (
			<div class="mb-12">
				<Image
					src={heroImage}
					alt={title}
					width={1200}
					height={600}
					class="w-full max-w-4xl mx-auto rounded-lg"
				/>
			</div>
		)}

		<!-- Article Header -->
		<header class="max-w-4xl mx-auto mb-12 text-center">
			<div class="mb-4">
				<time class="text-sm text-zinc-500 dark:text-zinc-500">
					{pubDate.toLocaleDateString(lang === 'en' ? 'en-US' : 'es-ES', {
						year: 'numeric',
						month: 'long',
						day: 'numeric'
					})}
				</time>
				{updatedDate && (
					<div class="text-sm text-zinc-500 dark:text-zinc-500 italic mt-1">
						{lang === 'en' ? 'Updated on' : 'Actualizado el'} {updatedDate.toLocaleDateString(lang === 'en' ? 'en-US' : 'es-ES', {
							year: 'numeric',
							month: 'long',
							day: 'numeric'
						})}
					</div>
				)}
			</div>
			<h1 class="text-3xl md:text-5xl font-bold text-zinc-900 dark:text-zinc-100 mb-6">
				{title}
			</h1>
			{description && (
				<p class="text-xl text-zinc-600 dark:text-zinc-400 max-w-2xl mx-auto">
					{description}
				</p>
			)}
		</header>

		<!-- Article Content -->
		<div class="max-w-4xl mx-auto prose">
			<slot />
		</div>

		<!-- Back to Blog -->
		<div class="max-w-4xl mx-auto mt-12 pt-8 border-t border-zinc-200 dark:border-zinc-700">
			<a
				href={`/${lang}/blog`}
				class="inline-flex items-center gap-2 text-orange-500 hover:text-orange-600 dark:text-orange-400 dark:hover:text-orange-300 transition-colors"
			>
				<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
				</svg>
				{lang === 'en' ? 'Back to blog' : 'Volver al blog'}
			</a>
		</div>
	</article>
</BaseLayout>
