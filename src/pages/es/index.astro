---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const allPosts = await getCollection("blog");
const posts = allPosts
	.filter((post) => post.data.lang === "es")
	.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<BaseLayout
	title="Swifty Journey Blog"
	description="Explorando iOS, Swift y SwiftUI a través de artículos y tutoriales"
	lang="es"
>
	<div class="py-12">
		<!-- Hero Section -->
		<section class="text-center mb-16">
			<h1
				class="text-5xl md:text-7xl font-bold tracking-tight text-zinc-900 dark:text-zinc-100 mb-6"
			>
				Swifty Journey <span class="text-orange-500">Blog</span>
			</h1>
			<p class="text-xl text-zinc-600 dark:text-zinc-400 max-w-2xl mx-auto">
				Explorando el mundo de iOS, Swift y SwiftUI a través de artículos,
				tutoriales y experiencias de desarrollo.
			</p>
		</section>

		<!-- Latest Posts -->
		<section>
			<h2 class="text-2xl font-bold text-zinc-900 dark:text-zinc-100 mb-8">
				Últimos Artículos
			</h2>
			<div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
				{
					posts.slice(0, 6).map((post) => (
						<article class="group">
							<a href={`/es/blog/${post.id}/`} class="block">
								<div class="rounded-2xl border border-zinc-200 dark:border-zinc-800 p-6 h-full transition-all hover:border-orange-500/30 hover:-translate-y-1 hover:shadow-md">
									<h3 class="text-lg font-semibold text-zinc-900 dark:text-zinc-100 mb-3 group-hover:text-orange-500 transition-colors">
										{post.data.title}
									</h3>
									<p class="text-zinc-600 dark:text-zinc-400 text-sm mb-4 line-clamp-3">
										{post.data.description}
									</p>
									<time class="text-xs text-zinc-500 dark:text-zinc-500">
										{post.data.pubDate.toLocaleDateString("es-ES", {
											year: "numeric",
											month: "long",
											day: "numeric",
										})}
									</time>
								</div>
							</a>
						</article>
					))
				}
			</div>
		</section>

		{
			posts.length > 6 && (
				<div class="text-center mt-12">
					<a
						href="/es/blog"
						class="inline-flex items-center gap-2 px-6 py-3 bg-orange-500 hover:bg-orange-600 text-white rounded-xl shadow-lg shadow-orange-500/30 hover:shadow-xl hover:scale-105 transition-all duration-300"
					>
						Ver todos los artículos
						<svg
							class="w-4 h-4"
							fill="none"
							stroke="currentColor"
							viewBox="0 0 24 24"
						>
							<path
								stroke-linecap="round"
								stroke-linejoin="round"
								stroke-width="2"
								d="M9 5l7 7-7 7"
							/>
						</svg>
					</a>
				</div>
			)
		}
	</div>
</BaseLayout>
